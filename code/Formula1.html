<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap 5.3.0-alpha1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <!-- D3 library -->
    <script src="https://d3js.org/d3.v5.js"></script>
    <!-- D3 library that converts TopoJson to GeoJson -->
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://unpkg.com/crossfilter2@1.5.3/crossfilter.min.js"></script>


    <title>Formula 1 Data Analysis</title>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">
                    <img src="f1_image.png" alt="Logo" width="50" height="25" class="d-inline-block align-text-top">
                    Data Visualisation Project
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="home.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Q2.html">Q2</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link"href="Formula1.html">Q3</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <h1 class="text-center">  What is the distribution of circuits around the world that have hosted Formula 1 races and how has it changed over time? </h1>
        <h2 class = "text-center"></h2>
        <div class="tooltip-container"></div>

        <div class="d-flex justify-content-center">
            <svg id="mapChart"></svg>
        </div>

            <div class="d-flex justify-content-center">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                        Select Year
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <!-- Adding options here dynamically using JS -->
                    </ul>
                </div>
            </div>

        <div id="bar-chart-container" class="container mt-5">
            <svg id="barChart" width="1000" height="500"></svg>
        </div>


        <div class="container" id="textdesc">
            <div class="row">
                <div class="col"></div>
                <div class="col-md-auto">
                    <h5>Processing of data</h5>

                    <p> The data for both visualizations was preprocessed using Python Pandas dataframes.
                        The datasets used were "circuits" and "races" from the Formula 1 World Championship
                        (1950 - 2023) dataset on Kaggle. Firstly, null values were checked to ensure the
                        data was ready for processing. Then, the datasets were merged based on their common
                        attribute, the 'circuitId', to associate each circuit with its corresponding season.
                        Next, the necessary attributes were selected for both visualizations. </p>

                    <p>For the map visualization, the attributes year, circuit name, city, country, latitude,
                        and longitude were needed. A dictionary was then created where each year is a key, and
                        the value is a list of dictionaries, each representing a race at a particular circuit
                        for that year. The inner dictionary contains the circuit name, city, country, and the
                        latitude and longitude coordinates. Moving on, the resulting dictionary was saved as
                        a JSON file, ready to be used by the D3 JavaScript library. Having this format of data
                        allowed categorizing the circuits into years and getting the coordinates of each circuit
                        to visualize them on the map, along with other relevant information.<p/>

                    <p>On the other hand, for the barchart, only the attributes year and circuits were needed.
                        The result of grouping circuits per year was extracted as a CSV file to be used by the
                        D3 JavaScript library. This format of data allowed visualizing the counts of each circuit
                        per year.
                    </p>

                </div>
                <div class="col"></div>
            </div>
        </div>
    </div>

</body>

<script src="map1.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

</html>